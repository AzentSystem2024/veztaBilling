<div class="salary-grid-wrapper" style="padding: 0 10px;">
  <div class="grid-container">
    <dx-data-grid
      [dataSource]="invoice"
      [showBorders]="true"
      [columnAutoWidth]="false"
      [wordWrapEnabled]="false"
      [rowAlternationEnabled]="true"
      [headerFilter]="{ visible: true }"
      [allowColumnReordering]="true"
      [showColumnHeaders]="true"
      [columnAutoWidth]="true"
      [allowColumnResizing]="true"
      [height]="'70vh'"
      [columnResizingMode]="'nextColumn'"
      [headerFilter]="{ visible: true }"
      [scrolling]="{ mode: 'virtual' }"
      rowAlternationInterval="2"
      [selection]="{ mode: 'single' }"
      [editing]="{ mode: 'cell', allowUpdating: true }"
    >
      <dxo-load-panel [showPane]="false"></dxo-load-panel>
      <dxo-scrolling mode="standard"></dxo-scrolling>
      <dxo-filter-builder [allowHierarchicalFields]="true">
      </dxo-filter-builder>
      <dxo-toolbar>
        <dxi-item location="before" locateInMenu="auto">
          <div class="stacked-toolbar-group">
            <dx-select-box
              #departmentBoxRef
              class="custom-select-box"
              [placeholder]="'Department'"
              label="Department"
              [labelMode]="'floating'"
         
              [dataSource]="departments"
              valueExpr="id"
              #departmentBox
  (onKeyDown)="onKeyDownHandler($event, 'billNoBoxRef')"
            ></dx-select-box>

            <dx-text-box
   #billNoBoxRef
              class="custom-text-box"
              [placeholder]="'Bill No.'"
              label="Bill No."
              [labelMode]="'floating'"
              [width]="200"
  (onKeyDown)="onKeyDownHandler($event, 'dateBoxRef')"
            ></dx-text-box>
            <dx-date-box

              label="Date"
              [labelMode]="'floating'"
              [displayFormat]="'dd-MM-yyyy'"
            ></dx-date-box>
          </div>
        </dxi-item>
        <dxi-item location="before" locateInMenu="auto">
          <div class="stacked-toolbar-group">
            <dx-number-box
              #dateBoxRef
              label="UHID"
              [labelMode]="'floating'"
              [width]="180"
              [format]="{ type: 'fixedPoint', precision: 2 }"
            ></dx-number-box>
            <dx-select-box
              [placeholder]="'Payment Mode'"
              [label]="'Payment Mode'"
              [labelMode]="'floating'"
              [width]="180"
              [dataSource]="paymentModes"
              displayExpr="name"
              valueExpr="id"
            ></dx-select-box>

            <dx-select-box
              [placeholder]="'Insurance'"
              [label]="'Insurance'"
              [labelMode]="'floating'"
              [width]="180"
              [dataSource]="insuranceOptions"
              displayExpr="name"
              valueExpr="id"
            ></dx-select-box>
          </div>
        </dxi-item>

        <dxi-item location="after" locateInMenu="auto">
          <div class="stacked-toolbar-group">
            <div class="spaced-field">
              <dx-text-box
                label="Patient Name"
                labelMode="floating"
                [width]="300"
              ></dx-text-box>
            </div>
          </div>
        </dxi-item>
        <dxi-item location="after" locateInMenu="auto">
          <div class="stacked-toolbar-group">
            <div class="dual-field-group">
              <dx-text-box
                label="Age"
                labelMode="floating"
                [readOnly]="true"
                [width]="95"
              >
              </dx-text-box>

              <dx-text-box
                label="Sex"
                labelMode="floating"
                [readOnly]="true"
                [width]="95"
              >
              </dx-text-box>
            </div>
            <div class="dual-field-group">
              <dx-text-box
                label="Ward"
                labelMode="floating"
                [readOnly]="true"
                [width]="95"
              >
              </dx-text-box>

              <dx-text-box
                label="Unit"
                labelMode="floating"
                [readOnly]="true"
                [width]="95"
              >
              </dx-text-box>
            </div>
            <dx-number-box
              [placeholder]="'Unit'"
              [label]="'Mobile No.'"
              [labelMode]="'floating'"
              [width]="200"
              [min]="0"
              [max]="12"
            ></dx-number-box>
          </div>
        </dxi-item>
      </dxo-toolbar>
      <dxi-column dataField="ITEM_CODE" caption="Item Code">
        <dxo-lookup
          [dataSource]="itemCodeOptions"
          displayExpr="name"
          valueExpr="id"
        ></dxo-lookup>
      </dxi-column>

      <dxi-column caption="Item Description"></dxi-column>
      <dxi-column
        caption="Quantity"
        dataType="number"
        [format]="{ type: 'fixedPoint', precision: 2 }"
        [editorOptions]="{ format: '#,##0.00' }"
      ></dxi-column>
      <dxi-column
        caption="UOM"
        [format]="{ type: 'fixedPoint', precision: 2 }"
        dataType="number"
        [editorOptions]="{ format: '#,##0.00' }"
      ></dxi-column>
      <dxi-column
        caption="Unit Price"
        [format]="{ type: 'fixedPoint', precision: 2 }"
        dataType="number"
        [editorOptions]="{ format: '#,##0.00' }"
      ></dxi-column>
      <dxi-column
        caption="Total"
        [format]="{ type: 'fixedPoint', precision: 2 }"
        dataType="number"
        [editorOptions]="{ format: '#,##0.00' }"
      ></dxi-column>
      <dxo-summary>
        <dxi-total-item
          summaryType="sum"
          [valueFormat]="customFormat"
          displayFormat="Grand Total: {0}"
          showInColumn="GROSS"
        >
        </dxi-total-item>

        <dxi-total-item
          summaryType="sum"
          [valueFormat]="customFormat"
          displayFormat="{0}"
          showInColumn="DEDUCT"
        >
        </dxi-total-item>
      </dxo-summary>
    </dx-data-grid>
    <div
      style="
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 10px;
      "
    >
      <!-- Left Section: Leave Salary and End of Service -->
      <div style="display: flex; gap: 20px; align-items: center">
        <dx-select-box
          [label]="'Schema'"
          [labelMode]="'floating'"
          [width]="150"
          [dataSource]="schemaOptions"
          displayExpr="name"
          valueExpr="id"
        ></dx-select-box>

        <!-- <dx-number-box
          [label]="'End of Service'"
          [labelMode]="'floating'"
 
          width="150"
          [format]="{ type: 'fixedPoint', precision: 2 }"
          dataType="number"
          [editorOptions]="{ format: '#,##0.00' }"
          [readOnly]="true"
        ></dx-number-box> -->
      </div>

      <!-- Right Section: Net Payable -->
      <div style="display: flex; align-items: center">
        <label style="margin-right: 10px; min-width: 100px">Total:</label>
        <dx-number-box
          [readOnly]="true"
          width="200"
          dataType="number"
          dataType="number"
          [editorOptions]="{ format: '#,##0.00' }"
          [format]="{ type: 'fixedPoint', precision: 2 }"
          [rtlEnabled]="true"
        ></dx-number-box>
      </div>
    </div>

    <div
      style="display: flex; align-items: center; gap: 20px; margin-top: 10px"
    >
      <div style="flex: 1">
        <!-- <dx-text-box
          [label]="'Remarks'"
          [labelMode]="'floating'"

          style="width: 100%"
        ></dx-text-box> -->
      </div>
    </div>
  </div>
</div>


